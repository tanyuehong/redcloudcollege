<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.redskt.classroom.mapper.EduUserAskMapper">

    <select id="getHomeQustionLists" resultType="com.redskt.classroom.entity.vo.RedClassAskQuestionVo">
        SELECT ask.id as qId, ask.title,ask.type,ask.tag,ask.content,ask.hot,ask.read,ask.hotnum,ask.price,ask.top,user.nickname,
        (select count(reply.id) from edu_ask_reply reply where reply.qid=ask.id) as  reply
        FROM edu_user_ask ask
        LEFT OUTER JOIN edu_user user ON ask.uid=user.id
        order by ask.read desc limit 20;
    </select>


    <select id="getQustionDetail" resultType="com.redskt.classroom.entity.vo.RedClassAskQuestionVo">
        SELECT ask.id as qId, ask.title,ask.type,ask.tag,ask.content,ask.hot,ask.read,ask.hotnum,ask.price,ask.top,user.nickname,
        (select count(reply.id) from edu_ask_reply reply where reply.qid=ask.id) as  reply
        FROM edu_user_ask ask
        LEFT OUTER JOIN edu_user user ON ask.uid=user.id
        WHERE ask.id=#{tId}
    </select>

</mapper>
